<!DOCTYPE html>

<head>
<title>[application name]</title>
<script src="http://modernizr.com/downloads/modernizr-latest.js"></script>
<style type="text/css">
body {
	background: #eeeeee;
	font-family: sans-serif;
	color: #000000;
	margin: 0px;
	padding: 0px;}

html {
	height:100%;
	margin: 0px;
	padding: 0px;}
	
div#nosupport {
	display: block;}
	
div#main {
	display: none;}
	
.canvas.webgl div#main {
	display: block;}
	
.canvas.webgl div#nosupport {
	display: none;}
	
img#logo {
	margin-top: 15%;}
	
span.ldtext {
	display: block;
	font-size: 120%;
	margin-top: 80px;}
	
#canvas {
	width: 100%;
	height: 100%;}
</style>
</head>

<body>
<center>
<div id="nosupport">
<img id="logo" src="" alt="[application logo]">
<span class="ldtext">Your browser must support WebGL and JavaScript to run this application.<br>Try a different browser.</span>
</div>
<div id="main">
<div id="ld">
<img id="logo" src="" alt="[application logo]">
<span class="ldtext" id="ldtext">Downloading application...</span>
</div>
<canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
<script type="text/javascript">
// The URL of the asm.js resource to load.
var EMSCRIPTEN_ASM = 'pview-panda.js';
// The uncompressed size of that resource (in bytes).
var ASM_SIZE = 1921587;

var ldtext = document.getElementById("ldtext");
var ld = document.getElementById("ld");
var canvas = document.getElementById("canvas");

var Module = {
	canvas: (function() {
		return canvas;
	})(),
	setStatus: function(text) {
		if (!text) {
			ld.style.display = "none";
		}
	},
};
function updateProgress(evt) {
    var percentComplete = (evt.loaded / ASM_SIZE)*100;  
    ldtext.innerHTML = "Downloading application... " + percentComplete + '%';
}   
function sendreq() {  
    var req = new XMLHttpRequest();    
    req.onprogress=updateProgress;
    req.open('GET', EMSCRIPTEN_ASM, true); 
    req.onreadystatechange = function (aEvt) {  
        if (req.readyState == 4) 
        {  
            ldtext.innerHTML = "Downloading dependencies...";
	    var script = document.createElement("script");
	    script.type = "text/javascript";
	    script.text = req.responseText;
	    document.body.appendChild(script);
        }  
    };  
    req.send(); 
}
window.onload = function() {
	sendreq();
}
</script>
</div>
</center>
</body>

</html>
